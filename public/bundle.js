(()=>{"use strict";var l=function(l,e,i){var s=this;this.ball=null,this.val=0,this.visited=!1,this.spawnBall=function(l){s.html.appendChild(l.html),s.ball=l},this.onClick=function(){if(null==s.ball&&(t.lastField=s,s.pf()),null!=s.ball)switch(t.firstField){case null:s.ball.select(),t.firstField=s;break;case s:s.ball.unSelect(),t.firstField=null;break;default:t.firstField.ball.unSelect(),s.ball.select(),t.firstField=s}},this.x=l,this.y=e,this.html=document.createElement("div"),this.pf=function(){i()},this.html.addEventListener("click",this.onClick),this.html.className="field",this.html.id=l+"-"+e},e=function(){function l(){var e=this;this.select=function(){e.html.style.width="38px",e.html.style.height="38px",e.html.style.margin="3px"},this.unSelect=function(){e.html.style.width="30px",e.html.style.height="30px",e.html.style.margin="7px"},this.html=document.createElement("div"),this.html.className="ball",this.color=Math.floor(Math.random()*l.collors.length),this.html.style.backgroundColor=l.collors[this.color]}return l.collors=["red","orange","yellow","green","blue","black","white"],l}(),t=function(){function t(){var i=this;this.queue=[],this.visited=[],this.qBalls=[],this.init=function(){i.createBoard(),i.createBallsQ()},this.createBoard=function(){i.html=document.createElement("div"),i.html.className="board";for(var e=0;e<i.height;e++){i.fields[e]=[];for(var t=0;t<i.width;t++){var s=new l(e,t,(function(){i.findPath()}));i.fields[e][t]=s,i.html.appendChild(s.html)}}document.body.appendChild(i.html)},this.createBallsQ=function(){i.ballsDiv=document.createElement("div"),document.body.appendChild(i.ballsDiv),i.ballsToQ(),i.spawnBalls()},this.ballsToQ=function(){for(var l=0;l<3;l++){var t=new e;i.qBalls[l]=t,i.ballsDiv.appendChild(t.html)}},this.spawnBalls=function(){for(var l=0;l<i.qBalls.length;){var e=Math.floor(Math.random()*i.width),t=Math.floor(Math.random()*i.height);null==i.fields[e][t].ball&&(i.fields[e][t].spawnBall(i.qBalls[l]),l++)}i.ballsToQ()},this.findPath=function(){if(null!=t.firstField)for(i.queue=[t.firstField];i.queue.length>0;){if(t.lastField==i.queue[0]){i.queue[0].html.style.backgroundColor="blue",i.queue[0].html.innerText="M";break}i.queue[0].visited=!0,i.queue[0].html.style.backgroundColor="red",i.queue[0].html.innerText=i.queue[0].val.toString(),i.dodajSasiadow(i.queue[0].val+1),i.queue.shift()}},this.dodajSasiadow=function(l){var e=i.queue[0].x,t=i.queue[0].y;e+1<i.width&&!i.fields[e+1][t].visited&&null==i.fields[e+1][t].ball&&(i.fields[e+1][t].val=l,i.queue.push(i.fields[e+1][t])),e-1>=0&&!i.fields[e-1][t].visited&&null==i.fields[e-1][t].ball&&(i.fields[e-1][t].val=l,i.queue.push(i.fields[e-1][t])),t+1<i.height&&!i.fields[e][t+1].visited&&null==i.fields[e][t+1].ball&&(i.fields[e][t+1].val=l,i.queue.push(i.fields[e][t+1])),t-1>=0&&!i.fields[e][t-1].visited&&null==i.fields[e][t-1].ball&&(i.fields[e][t-1].val=l,i.queue.push(i.fields[e][t-1]))},this.fields=[],this.width=9,this.height=9,this.init()}return t.firstField=null,t.lastField=null,t}();new t})();